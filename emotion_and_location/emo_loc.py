# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'emo_loc.ui'
#
# Created by: PyQt5 UI code generator 5.15.6
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtWidgets import QApplication,QWidget, QVBoxLayout, QPushButton, QFileDialog , QLabel, QTextEdit, QMessageBox
import sys
from PyQt5.QtGui import QPixmap
import webbrowser

import emotion
import location

class Ui_emotion_loc(object):
    
    
    def messages(self, title, message):
        mess = QMessageBox()
        mess.setWindowTitle(title)
        mess.setText(message)
        mess.setStandardButtons(QMessageBox.Ok)
        mess.exec_()
    
    def getImage(self):
        try:
            fname = QFileDialog.getOpenFileName()
            self.imagePath = fname[0]
            #self.lbl_imgtext.setText(self.imagePath)
            
            pixmap = QPixmap(self.imagePath)
            self.label.setPixmap(QPixmap(pixmap))
            self.label.setScaledContents(True)
        except:
            self.messages("error", "problem occured.")
    
    def emotion_check(self):
        try:
            
            emotion.detection(self.imagePath)
        except:
            self.messages("error", "something went wrong!!.")
            
    
    def location_check(self):
        res1, res2, res3, url = location.predict(self.imagePath)
        self.lbl_date.setText(res1)
        self.lbl_long.setText(res2)
        self.lbl_state.setText(res3)
        
        
    
    def setupUi(self, emotion_loc):
        emotion_loc.setObjectName("emotion_loc")
        emotion_loc.resize(559, 230)
        
        self.lblback = QtWidgets.QLabel(emotion_loc)
        self.lblback.setGeometry(QtCore.QRect(0, 0, 561, 231))
        self.lblback.setText("")
        self.lblback.setObjectName("lblback")
        
        self.label = QtWidgets.QLabel(emotion_loc)
        self.label.setGeometry(QtCore.QRect(10, 20, 181, 161))
        self.label.setText("")
        self.label.setObjectName("label")
        
        self.btn_browse = QtWidgets.QPushButton(emotion_loc)
        self.btn_browse.setGeometry(QtCore.QRect(10, 200, 171, 23))
        self.btn_browse.setObjectName("btn_browse")
        self.btn_browse.clicked.connect(self.getImage)
        
        self.btn_emotion = QtWidgets.QPushButton(emotion_loc)
        self.btn_emotion.setGeometry(QtCore.QRect(210, 30, 151, 71))
        font = QtGui.QFont()
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.btn_emotion.setFont(font)
        self.btn_emotion.setObjectName("btn_emotion")
        self.btn_emotion.clicked.connect(self.emotion_check)
        
        self.btn_locate = QtWidgets.QPushButton(emotion_loc)
        self.btn_locate.setGeometry(QtCore.QRect(210, 130, 151, 71))
        font = QtGui.QFont()
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.btn_locate.setFont(font)
        self.btn_locate.setObjectName("btn_locate")
        self.btn_locate.clicked.connect(self.location_check)
        
        self.lbl_date = QtWidgets.QLabel(emotion_loc)
        self.lbl_date.setGeometry(QtCore.QRect(390, 20, 151, 20))
        self.lbl_date.setText("")
        self.lbl_date.setObjectName("lbl_date")
        
        self.lbl_long = QtWidgets.QLabel(emotion_loc)
        self.lbl_long.setGeometry(QtCore.QRect(390, 106, 151, 20))
        self.lbl_long.setText("")
        self.lbl_long.setObjectName("lbl_long")
        
        self.lbl_state = QtWidgets.QLabel(emotion_loc)
        self.lbl_state.setGeometry(QtCore.QRect(390, 190, 151, 20))
        self.lbl_state.setText("")
        self.lbl_state.setObjectName("lbl_state")

        self.retranslateUi(emotion_loc)
        QtCore.QMetaObject.connectSlotsByName(emotion_loc)

    def retranslateUi(self, emotion_loc):
        _translate = QtCore.QCoreApplication.translate
        emotion_loc.setWindowTitle(_translate("emotion_loc", "emotion_loc"))
        self.btn_browse.setText(_translate("emotion_loc", "BROWSE"))
        self.btn_emotion.setText(_translate("emotion_loc", "DETECT EMOTION"))
        self.btn_locate.setText(_translate("emotion_loc", "DETECT LOCATION"))


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    emotion_loc = QtWidgets.QDialog()
    ui = Ui_emotion_loc()
    ui.setupUi(emotion_loc)
    emotion_loc.show()
    sys.exit(app.exec_())
