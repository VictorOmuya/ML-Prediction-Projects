# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file '.\pyQts\student_prediction.ui'
#
# Created by: PyQt5 UI code generator 5.15.0
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtCore import QPropertyAnimation, QRect
from func2 import *
import func2
import pandas as pd
import pickle

class Ui_Main(object):
    
    def errorbox(self, title, message):
        mess = QtWidgets.QMessageBox()
        mess.setWindowTitle(title)
        mess.setText(message)
        mess.setStandardButtons(QtWidgets.QMessageBox.Ok)
        mess.exec_()
    
    def predictor(self):
        try:
            age = func2.input_data(self.comboBox)
            sex = func2.input_data2(self.comboBox_8)
            cold = func2.input_data3(self.comboBox_9)
            mosq = func2.input_data4(self.comboBox_6)
            fat = func2.input_data5(self.comboBox_3)
            ache = func2.input_data6(self.comboBox_4)
            bitter = func2.input_data7(self.comboBox_7)
            urine = func2.input_data8(self.comboBox_5)
            temp = func2.input_data9(self.comboBox_2)
            
            table = pd.DataFrame([[age, sex, cold, mosq, fat, ache, bitter, urine, temp]], columns = ['age','sex',
                'cold', 'Mosq_bite', 'fatique', 'headace', 'bitter_tongue', 'cocacola_urine', 'high_temp'])
          
            model = pickle.load(open("malaria.sav", "rb"))
                
            prediction = model.predict(table)
            
            for a in prediction:
                a = str(a)
                if a == "0":
                    self.lineEdit.setText('No Malaria')
                elif a =="1":
                    self.lineEdit.setText("Malaria detected")
               
        except:
            self.errorbox("error", "There is a problem. Please make sure all fields are entered correctly!")
    
    def setupUi(self, Main):
        Main.setObjectName("Main")
        Main.resize(737, 394)
        Main.setFixedSize(Main.width(), Main.height())
        
        self.frame = QtWidgets.QFrame(Main)
        self.frame.setGeometry(QtCore.QRect(0, -1, 761, 381))
        self.frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame.setObjectName("frame")
        
        self.label = QtWidgets.QLabel(self.frame)
        self.label.setGeometry(QtCore.QRect(30, 60, 681, 141))
        self.label.setStyleSheet("")
        self.label.setText("")
        self.label.setObjectName("label")
        self.label.setStyleSheet("background-image: url(./img/malaria2.jpg)")
        
        
        self.label_3 = QtWidgets.QLabel(self.frame)
        self.label_3.setGeometry(QtCore.QRect(100, 10, 531, 31))
        self.label_3.setStyleSheet("color: rgb(0, 132, 198);\n"
"font: 75 14pt \"Bauhaus 93\";")
        self.label_3.setObjectName("label_3")
        
        self.pushButton = QtWidgets.QPushButton(self.frame)
        self.pushButton.setGeometry(QtCore.QRect(313, 80, 120, 21))
        self.pushButton.setStyleSheet("font: 65 15pt \"MS Shell Dlg 2\";\n"
"color: rgb(255,0,0);\n"
"background-color: rgb(255, 255, 255);")
        self.pushButton.setFlat(True)
        self.pushButton.setObjectName("pushButton")
        self.pushButton.clicked.connect(self.predictor)
        
        self.lineEdit = QtWidgets.QLineEdit(self.frame)
        self.lineEdit.setGeometry(QtCore.QRect(313, 115, 120, 51))
        self.lineEdit.setStyleSheet("font: 55 12pt \"MS Shell Dlg 2\";\n"
"color: rgb(0, 0, 0);\n"
"background-color: rgb(255, 255, 255);")
        self.lineEdit.setText("")
        self.lineEdit.setAlignment(QtCore.Qt.AlignCenter)
        self.lineEdit.setReadOnly(True)
        self.lineEdit.setObjectName("lineEdit")
        
        #self.labell = QtWidgets.QLabel(self.frame)
        #self.labell.setGeometry(QtCore.QRect(30, 230, 211, 22))
        #self.labell.setStyleSheet("")
        #self.labell.setText("")
        #self.labell.setObjectName("labell")
        #self.labell.setStyleSheet("background-color:rgb(0, 121, 182);")
        
        self.comboBox = QtWidgets.QLineEdit(self.frame)
        self.comboBox.setGeometry(QtCore.QRect(500, 310, 211, 22))
        self.comboBox.setText("")
        self.comboBox.setObjectName("comboBox")
        self.comboBox.setPlaceholderText('Enter Age')
        
        self.comboBox_7 = QtWidgets.QComboBox(self.frame)
        self.comboBox_7.setGeometry(QtCore.QRect(264, 230, 211, 22))
        self.comboBox_7.setObjectName("comboBox_7")
        self.comboBox_7.addItem("Bitter Tongue")
        self.comboBox_7.addItem("Yes")
        self.comboBox_7.addItem("No") 
        
        self.comboBox_2 = QtWidgets.QComboBox(self.frame)
        self.comboBox_2.setGeometry(QtCore.QRect(263, 270, 211, 22))
        self.comboBox_2.setObjectName("comboBox_2")
        self.comboBox_2.addItem("High Body Temperature")
        self.comboBox_2.addItem("Yes")
        self.comboBox_2.addItem("No")
     
        self.comboBox_3 = QtWidgets.QComboBox(self.frame)
        self.comboBox_3.setGeometry(QtCore.QRect(30, 230, 211, 22))
        self.comboBox_3.setObjectName("comboBox_3")
        self.comboBox_3.addItem("Fatique")
        self.comboBox_3.addItem("Yes")
        self.comboBox_3.addItem("No")
            
        self.comboBox_8 = QtWidgets.QComboBox(self.frame)
        self.comboBox_8.setGeometry(QtCore.QRect(30, 270, 211, 22))
        self.comboBox_8.setObjectName("comboBox_8")
        self.comboBox_8.addItem("Sex")
        self.comboBox_8.addItem("Male")
        self.comboBox_8.addItem("Female")
        
        self.comboBox_9 = QtWidgets.QComboBox(self.frame)
        self.comboBox_9.setGeometry(QtCore.QRect(500, 230, 211, 22))
        self.comboBox_9.setObjectName("comboBox_9")
        self.comboBox_9.addItem("Cold")
        self.comboBox_9.addItem("Yes")
        self.comboBox_9.addItem("No")
    
        
        self.comboBox_6 = QtWidgets.QComboBox(self.frame)
        self.comboBox_6.setGeometry(QtCore.QRect(500, 270, 211, 22))
        self.comboBox_6.setObjectName("comboBox_6")
        self.comboBox_6.addItem("Mosquitoe Bites")
        self.comboBox_6.addItem("Yes")
        self.comboBox_6.addItem("No")
        
        self.comboBox_4 = QtWidgets.QComboBox(self.frame)
        self.comboBox_4.setGeometry(QtCore.QRect(30, 310, 211, 22))
        self.comboBox_4.setObjectName("comboBox_4")
        self.comboBox_4.addItem("Headache")
        self.comboBox_4.addItem("Yes")
        self.comboBox_4.addItem("No")
        
        self.comboBox_5 = QtWidgets.QComboBox(self.frame)
        self.comboBox_5.setGeometry(QtCore.QRect(264, 310, 211, 22))
        self.comboBox_5.setObjectName("comboBox_5")
        self.comboBox_5.addItem("Brown Urine")
        self.comboBox_5.addItem("Yes")
        self.comboBox_5.addItem("No")
        
   
        self.label_2 = QtWidgets.QLabel(self.frame)
        self.label_2.setGeometry(QtCore.QRect(160, 40, 401, 20))
        self.label_2.setObjectName("label_2")
        self.anim = QPropertyAnimation(self.label_2, b"geometry")
        self.anim.setDuration(50000)
        self.anim.setStartValue(QRect(761, 40,2000, 20))
        self.anim.setEndValue(QRect(-600, 40, 2000, 20))
        self.anim.setLoopCount(50)
        self.anim.start()

        self.retranslateUi(Main)
        QtCore.QMetaObject.connectSlotsByName(Main)

    def retranslateUi(self, Main):
        _translate = QtCore.QCoreApplication.translate
        Main.setWindowTitle(_translate("Main", "Main"))
        self.label_3.setText(_translate("Main", "    AVOID MOSQUITOE BITES, THEY ARE DANGEROUS......."))
        self.pushButton.setText(_translate("Main", "CHECK"))
        self.label_2.setText(_translate("Main", "Instruction...: Kindly fill all fields as applied to you, and then click 'CHECK' Button for Prediction........"))
        


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    Main = QtWidgets.QDialog()
    ui = Ui_Main()
    ui.setupUi(Main)
    Main.show()
    sys.exit(app.exec_())
