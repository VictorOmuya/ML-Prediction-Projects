# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file './pyQts/software.ui'
#
# Created by: PyQt5 UI code generator 5.15.0
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
import pickle
import soft_func
import pandas as pd
from PyQt5.QtGui import QPixmap, QMovie, QPainter

class Ui_MainWindow(object):
    def messagebox(self, title, message):
        mess = QtWidgets.QMessageBox()
        mess.setWindowTitle(title)
        mess.setText(message)
        mess.setStandardButtons(QtWidgets.QMessageBox.Ok)
        mess.exec_()
    
    def predictor(self):
        
        ei = soft_func.input_data(self.ei)
        ilf = soft_func.input_data2(self.ilf)
        eif = soft_func.input_data3(self.eif)
        eo = soft_func.input_data4(self.eo)
        eq = soft_func.input_data5(self.eq)
        teamexp = soft_func.input_data6(self.teamexp)
        entity = soft_func.input_data7(self.entity)
        transaction = soft_func.input_data8(self.transaction)
        length = soft_func.input_data9(self.length)
        managerexp = soft_func.input_data10(self.managerexp)
        
        ILFs = ilf*10
        EIFs = eif*7
        EIs = ei*4
        EOs = eo*5
        EQs = eq*4
            
        users_points = EIs + ILFs + EIFs + EOs + EQs
        
        func_point = users_points * 0.65 + (0.01 * (14 * 3))
            
        table = pd.DataFrame([[teamexp, managerexp,  length,  transaction, entity, func_point]], columns =
                                 ['TeamExp', 'ManagerExp','Length', 'Transactions', 'Entities', 'PointsAdjust'])
        
        model = pickle.load(open("model\soft_model.sav", "rb"))
        strmodel = str(model)
        if strmodel.startswith('DecisionTreeRegressor'):
            self.mod = True
            prediction = model.predict(table)
            proposed = self.lineEdit.text()
            proposed = int(proposed)
    
            for a in prediction:
                a = a*100
            
                if a < proposed:
                    #self.messagebox("softwareCOST", " The function point is calculated as %s... on mid-level classification\n\n Combining this with the other details provided,\
                    #                         \n\n This is our advice: \n\nYou can go ahead with the project, the offer is a good one."%func_point) 
                    
                    self.messagebox("software cost", " The amount offered for the job meets the specifications. . \n\n Recommendation: Development team can proceed with project ")
                    
                  
                elif a > proposed:
                    #self.messagebox("softwareCOST", "The function point is calculated as %s... on mid-level classification \n\n Combining this with the other details provided,\
                                           # \n\n Our candid advice is that you Consider requesting an \n increase in payment for this project."%func_point)
                    
                     self.messagebox("software cost", " This project cannot be completed because the amount offered is too low.. \n\n Recommendation: Project Manager should meet with Clients for further negotiations")
                
        else:
            self.mod = False
            print('error')
                
        return self.mod
    
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(1365, 759)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.label_9 = QtWidgets.QLabel(self.centralwidget)
        self.label_9.setGeometry(QtCore.QRect(-20, -5, 1391, 91))
        self.label_9.setStyleSheet("background-color: rgb(0, 0, 17);\n"
"color: rgb(0, 0, 15);")
        self.label_9.setText("")
        self.label_9.setObjectName("label_9")
        self.label_13 = QtWidgets.QLabel(self.centralwidget)
        self.label_13.setGeometry(QtCore.QRect(30, 20, 231, 51))
        font = QtGui.QFont()
        font.setFamily("Cooper Black")
        font.setPointSize(20)
        font.setBold(False)
        font.setItalic(False)
        font.setWeight(50)
        self.label_13.setFont(font)
        self.label_13.setStyleSheet("font: 20pt \"Cooper Black\";\n"
"color: rgb(255, 255, 0);\n"
"")
        self.label_13.setObjectName("label_13")
    
        
        self.lbl_back = QtWidgets.QLabel(self.centralwidget)
        self.lbl_back.setGeometry(QtCore.QRect(5, 90, 881, 531))
        self.lbl_back.setObjectName("lbl_back")
        #self.lbl_back.setStyleSheet("background-color: rgb(255, 255, 255);")
        Pixmap = QPixmap('image\potrate.jpeg')
        self.lbl_back.setPixmap(Pixmap)
        self.lbl_back.setScaledContents(True)
        
        self.label_15 = QtWidgets.QLabel(self.centralwidget)
        self.label_15.setGeometry(QtCore.QRect(-10, 625, 1381, 121))
        self.label_15.setStyleSheet("background-color: rgb(0, 0, 17);")
        self.label_15.setObjectName("label_15")
        
       
        
        self.label = QtWidgets.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(0, 90, 881, 211))
        self.label.setObjectName("label")
        
        self.label_2 = QtWidgets.QLabel(self.centralwidget)
        self.label_2.setGeometry(QtCore.QRect(880, 90, 481, 531))
        self.label_2.setObjectName("label_2")
        #self.label_2.setStyleSheet("background-image: url(image\imgs2.jpg);")
        Pixmap1 = QPixmap('image\stkimg.png')
        self.label_2.setPixmap(Pixmap1)
        self.label_2.setScaledContents(True)
        
        
        
        
        
        self.ei = QtWidgets.QLineEdit(self.centralwidget)
        self.ei.setGeometry(QtCore.QRect(310, 220, 231, 30))
        self.ei.setObjectName("ei")
        self.ei.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.ilf = QtWidgets.QLineEdit(self.centralwidget)
        self.ilf.setGeometry(QtCore.QRect(80, 190, 211, 30))
        self.ilf.setObjectName("ilf")
        self.ilf.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.eif = QtWidgets.QLineEdit(self.centralwidget)
        self.eif.setGeometry(QtCore.QRect(570, 190, 211, 30))
        self.eif.setObjectName("eif")
        self.eif.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.eo = QtWidgets.QLineEdit(self.centralwidget)
        self.eo.setGeometry(QtCore.QRect(80, 260, 211, 30))
        self.eo.setObjectName("eo")
        self.eo.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.eq = QtWidgets.QLineEdit(self.centralwidget)
        self.eq.setGeometry(QtCore.QRect(570, 260, 211, 30))
        self.eq.setObjectName("eq")
        self.eq.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.teamexp = QtWidgets.QLineEdit(self.centralwidget)
        self.teamexp.setGeometry(QtCore.QRect(80, 460, 211, 30))
        self.teamexp.setObjectName("teamexp")
        self.teamexp.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.entity = QtWidgets.QLineEdit(self.centralwidget)
        self.entity.setGeometry(QtCore.QRect(570, 530, 211, 30))
        self.entity.setObjectName("entity")
        self.entity.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.transaction = QtWidgets.QLineEdit(self.centralwidget)
        self.transaction.setGeometry(QtCore.QRect(80, 530, 211, 30))
        self.transaction.setObjectName("transaction")
        self.transaction.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.length = QtWidgets.QLineEdit(self.centralwidget)
        self.length.setGeometry(QtCore.QRect(570, 460, 211, 30))
        self.length.setObjectName("length")
        self.length.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.managerexp = QtWidgets.QLineEdit(self.centralwidget)
        self.managerexp.setGeometry(QtCore.QRect(310, 490, 231, 30))
        self.managerexp.setObjectName("managerexp")
        self.managerexp.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        self.result_Text = QtWidgets.QLabel(self.centralwidget)
        self.result_Text.setGeometry(QtCore.QRect(920, 190, 371, 361))
        self.result_Text.setObjectName("result_Text")
        font = QtGui.QFont()
        font.setFamily("Bauhaus 93")
        font.setPointSize(6)
        self.result_Text.setFont(font)
        self.result_Text.setStyleSheet("color: rgb(255, 255, 255);\n")
   
        
        self.submit = QtWidgets.QPushButton(self.centralwidget)
        self.submit.setGeometry(QtCore.QRect(380, 350, 111, 51))
        font = QtGui.QFont()
        font.setFamily("Bauhaus 93")
        font.setPointSize(12)
        self.submit.setFont(font)
        self.submit.setObjectName("submit")
        self.submit.clicked.connect(self.predictor)
        self.submit.setStyleSheet("background-color: rgb(137, 207, 240);")
        
        self.lineEdit = QtWidgets.QLineEdit(self.centralwidget)
        self.lineEdit.setGeometry(QtCore.QRect(310, 120, 231, 30))
        self.lineEdit.setObjectName("lineEdit")
        self.lineEdit.setStyleSheet("border :1px solid blue;"
                                   "border-top-left-radius :7px;"
                                   " border-top-right-radius :7px; "
                                   "border-bottom-left-radius : 7px; "
                                   "border-bottom-right-radius : 7px")
        
        
        
        self.label_9.raise_()
        self.label_13.raise_()
        self.lbl_back.raise_()
        self.label_15.raise_()
        
        self.label.raise_()
        self.label_2.raise_()
        self.ei.raise_()
        self.ilf.raise_()
        self.eif.raise_()
        self.eo.raise_()
        self.eq.raise_()
        self.teamexp.raise_()
        self.entity.raise_()
        self.transaction.raise_()
        self.length.raise_()
        self.managerexp.raise_()
        self.result_Text.raise_()
        self.submit.raise_()
        self.lineEdit.raise_()
        MainWindow.setCentralWidget(self.centralwidget)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)
        self.actionSignup = QtWidgets.QAction(MainWindow)
        self.actionSignup.setObjectName("actionSignup")

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
        self.label_13.setText(_translate("MainWindow", "Software Cost"))
        self.lbl_back.setText(_translate("MainWindow", ""))
        self.label_15.setText(_translate("MainWindow", ""))
      
        self.label.setText(_translate("MainWindow", ""))
        self.ei.setPlaceholderText(_translate("MainWindow", "Number of User Inputs"))
        self.ilf.setPlaceholderText(_translate("MainWindow", "Number of User Files"))
        self.eif.setPlaceholderText(_translate("MainWindow", "Number of External Interfaces"))
        self.eo.setPlaceholderText(_translate("MainWindow", "Number of User Outputs"))
        self.eq.setPlaceholderText(_translate("MainWindow", "Number of User Enquiries"))
        
        self.teamexp.setPlaceholderText(_translate("MainWindow", "Team Experience in years"))
        self.entity.setPlaceholderText(_translate("MainWindow", "Total number of Entities"))
        self.transaction.setPlaceholderText(_translate("MainWindow", "Total number of Logical Transactions"))
        self.length.setPlaceholderText(_translate("MainWindow", "Proposed length of production in months"))
        self.managerexp.setPlaceholderText(_translate("MainWindow", "Manager Experience in years"))
        self.submit.setText(_translate("MainWindow", "CHECK"))
        self.lineEdit.setPlaceholderText(_translate("MainWindow", "Proposed amount offered for this software"))
        self.actionSignup.setText(_translate("MainWindow", "Signup"))
        self.result_Text.setText(_translate("MainWindow", ""))

if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
