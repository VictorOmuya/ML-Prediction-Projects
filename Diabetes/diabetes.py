# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file '.\pyQts\student_prediction.ui'
#
# Created by: PyQt5 UI code generator 5.15.0
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtCore import QPropertyAnimation, QRect
import pandas as pd
import pickle


class Ui_Main(object):
    
    def solutn(self, title, message):
        mess = QtWidgets.QMessageBox()
        mess.setWindowTitle(title)
        mess.setText(message)
        mess.setStandardButtons(QtWidgets.QMessageBox.Ok)
        mess.exec_()
    
    def migrate(self):
        #self.window = QtWidgets.QMainWindow()
        #self.ui = Ui_Dialog()
        #self.ui.setupUi(self.window)
        #self.window.show()
        
        
        
        if(self.vision.currentText() == "No" or self.shs.currentText() == "No"):
        
            self.solutn("What to do", "You are suffering from TYPE 1 Diabetes Mellitus\
                          \n1. Reduce Stress: \nStress can raise your blood sugar and make you less sensitive to insulin\
                          \n2. Quit Smoking: \nIf you smoke, you're also more likely to have serious health\
                          \nproblems as well as a higher chance for complications from diabetes,\
                          \nPoor blood flow to the legs and feet,ulcers, and amputation of your toes or feet\
                          \n3. Cut back from alcohol: \nIf you're on insulin or oral diabetes meds like sulfonylureas or meglitinides,\
                          \ndrinking alcohol can drop blood sugar to dangerous levels. When you drink,\
                          \nyour liver has to work to remove the alcohol from your blood instead of regulating your blood sugar.\
                          \n\nA LIST OF MEDIATION FOR YOU:\
                          \n\n- Amylinomimetic drug: \nPramlintide (SymlinPen 120, SymlinPen 60) is an amylinomimetic drug. Itâ€™s an injectable drug used before meals.\
                          \n- NovoLog Mix 70/30 (insulin aspart protamine-insulin aspart)\
                          \n- Humalog Mix 75/25 (insulin lispro protamine-insulin lispro)\
                          \n- Humalog Mix 50/50 (insulin lispro protamine-insulin lispro)\
                          \n- Humulin 70/30 (human insulin NPH-human insulin regular)\
                          \n- Novolin 70/30 (human insulin NPH-human insulin regular)\
                          \n- Ryzodeg (insulin degludec-insulin aspart)")
    
        elif(self.vision.currentText() == "Yes" or self.shs.currentText() == "Yes"):
            self.solutn("What to do", "You are suffering from TYPE 2 Diabetes Mellitus\
                          \n1. Reduce Stress: \nStress can raise your blood sugar and make you less sensitive to insulin\
                          \n2. Quit Smoking: \nIf you smoke, you're also more likely to have serious health\
                          \nproblems as well as a higher chance for complications from diabetes\
                          \nPoor blood flow to the legs and feet, which could lead to infections, ulcers, and amputation of your toes or feet\
                          \n3. Cut back from alcohol: \nIf you're on insulin or oral diabetes meds like sulfonylureas or meglitinides,\
                          \n\nA LIST OF MEDIATION FOR YOU:\
                          \n\n- Alpha-glucosidase inhibitors: acarbose(Precose) and miglitos(Giyset). They are to be taken before meals\
                          \n\n- Biguanides: Biguanides decrease how much sugar your liver makes. You take METFORMIN\
                          \n\n- For antihyperglycemic treatment regimen, you take the following drugs:\
                          \n- albiglutide (Tanzeum), dulaglutide (Trulicity), exenatide (Byetta), exenatide extended-release (Bydureon),\
                          \n- liraglutide (Victoza), semaglutide (Ozempic)\
                          \n- Thiazolidinediones work by decreasing glucose in your liver. They also help your fat cells use insulin better.\
                          \n- glimepiride (Amaryl)\
                          \n- Sulfonylureas: glimepiride-pioglitazone (Duetact), glimepiride-rosiglitazone (Avandaryl), gliclazide, glipizide (Glucotrol),\
                          \n- glipizide-metformin (Metaglip), glyburide (DiaBeta, Glynase, Micronase), glyburide-metformin (Glucovance),\
                          \n- chlorpropamide (Diabinese), tolazamide (Tolinase)")
                            
            
    def predictor(self):
        try:
            glu = self.Glucose.text()
            bpp = self.bp.text()
            sk = self.skint.text()
            ag = self.age.text()
            pregnant = self.preg.text()
            bm = self.bmi.text()
            insu = self.insulin.text()
            
                
            if self.vision.currentText() == "Blured Vision" or self.shs.currentText() == "Slow Healing Sore":
                self.solutn("error", "kindly input valid options")
                self.lineEdit.setText('')
                
            elif int(glu) > 200 or int(glu) == 200 and self.vision.currentText() == "Yes":
                self.lineEdit.setText('Type 2 Diabetic')
                self.solution.show()
            
            elif int(glu) > 200 or int(glu) == 200 and self.vision.currentText() == "No":
                self.lineEdit.setText('Type 1 Diabetic')
                self.solution.show()
                        
            elif int(glu) < 200:            
                table = pd.DataFrame([[pregnant, glu, bpp, sk, insu, bm, ag]], columns = ['Pregnancies',
                    'Glucose', 'BloodPressure', 'Skin Thickness', 'Insulin', 'BMI', 'Age'])
                model = pickle.load(open("diabetes_mod.sav", "rb"))
                     
                prediction = model.predict(table)
                for a in prediction:
                    a = str(a)
                            
                    if a == "1" and self.vision.currentText() == "Yes":
                        self.lineEdit.setText('Type 2 Diabetic')
                        self.solution.show()
                    elif a == "1" and self.vision.currentText() == "No":
                        self.lineEdit.setText('Type 1 Diabetic')
                        self.solution.show()
                    elif a =="0":
                        self.lineEdit.setText("Not Diabetic")
                        self.solution.hide()
             
        except:
            
            self.solutn("error", "There is a problem. Please make sure all fields are entered correctly!")
    
    def setupUi(self, Main):
        Main.setObjectName("Main")
        Main.resize(737, 350)
        Main.setFixedSize(Main.width(), Main.height())
        
        self.frame = QtWidgets.QFrame(Main)
        self.frame.setGeometry(QtCore.QRect(0, -1, 761, 381))
        self.frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame.setObjectName("frame")
        
        self.label = QtWidgets.QLabel(self.frame)
        self.label.setGeometry(QtCore.QRect(30, 60, 681, 141))
        self.label.setStyleSheet("")
        self.label.setText("")
        self.label.setObjectName("label")
        self.label.setStyleSheet("background-image: url(./img/studentPrediction.jfif)")
        
        
        self.label_3 = QtWidgets.QLabel(self.frame)
        self.label_3.setGeometry(QtCore.QRect(100, 10, 531, 31))
        self.label_3.setStyleSheet("color: rgb(0, 132, 198);\n"
"font: 60 14pt \"Bauhaus 93\";")
        self.label_3.setObjectName("label_3")
        
        self.pushButton = QtWidgets.QPushButton(self.frame)
        self.pushButton.setGeometry(QtCore.QRect(313, 80, 111, 21))
        self.pushButton.setStyleSheet("font: 65 12pt \"MS Shell Dlg 2\";\n"
"color: rgb(255, 255, 255);\n"
"background-color: rgb(0, 121, 182);")
        self.pushButton.setFlat(True)
        self.pushButton.setObjectName("pushButton")
        self.pushButton.clicked.connect(self.predictor)
        
        self.lineEdit = QtWidgets.QLineEdit(self.frame)
        self.lineEdit.setGeometry(QtCore.QRect(295, 110, 150, 51))
        self.lineEdit.setStyleSheet("font: 60 12pt \"MS Shell Dlg 2\";\n"
"color: rgb(255, 255, 255);\n"
"background-color: rgb(0, 121, 182);")
        self.lineEdit.setText("")
        self.lineEdit.setAlignment(QtCore.Qt.AlignCenter)
        self.lineEdit.setReadOnly(True)
        self.lineEdit.setObjectName("lineEdit")
        
        self.solution = QtWidgets.QPushButton(self.frame)
        self.solution.setGeometry(QtCore.QRect(313, 170, 111, 21))
        self.solution.setStyleSheet("font: 65 12pt \"MS Shell Dlg 2\";\n"
"color: rgb(255, 255, 255);\n"
"background-color: rgb(0, 121, 182);")
        self.solution.setFlat(True)
        self.solution.setObjectName("solution")
        self.solution.hide()
        self.solution.clicked.connect(self.migrate)
        
        self.vision = QtWidgets.QComboBox(self.frame)
        self.vision.setGeometry(QtCore.QRect(30, 310, 211, 22))
        self.vision.setObjectName("vision")
        
        """
        self.vision.setStyleSheet("font: 30 12pt \"MS Shell Dlg 2\";\n"
#"color: rgb(255, 255, 255);\n"
#"background-color: rgb(0, 121, 182);")
        """
        
        self.vision.addItem("No")
        self.vision.addItem("Yes")
        
        self.shs = QtWidgets.QComboBox(self.frame)
        self.shs.setGeometry(QtCore.QRect(500, 310, 211, 22))
        self.shs.setObjectName("shs")
        """
        self.shs.setStyleSheet("font: 30 12pt \"MS Shell Dlg 2\";\n"
"color: rgb(255, 255, 255);\n"
"background-color: rgb(0, 121, 182);")
        """
        self.shs.addItem("No")
        self.shs.addItem("Yes")
        
        #self.labell = QtWidgets.QLabel(self.frame)
        #self.labell.setGeometry(QtCore.QRect(30, 230, 211, 22))
        #self.labell.setStyleSheet("")
        #self.labell.setText("")
        #self.labell.setObjectName("labell")
        #self.labell.setStyleSheet("background-color:rgb(0, 121, 182);")
        
        
        self.preg = QtWidgets.QLineEdit(self.frame)
        self.preg.setGeometry(QtCore.QRect(264, 230, 211, 22))
        self.preg.setObjectName("preg")
        self.preg.setPlaceholderText("")
        
        self.Glucose = QtWidgets.QLineEdit(self.frame)
        self.Glucose.setGeometry(QtCore.QRect(263, 270, 211, 22))
        self.Glucose.setObjectName("Glucose")
        self.Glucose.setPlaceholderText("")
        
     
        self.bp = QtWidgets.QLineEdit(self.frame)
        self.bp.setGeometry(QtCore.QRect(30, 230, 211, 22))
        self.bp.setObjectName("bp")
        self.bp.setPlaceholderText("")
        
        
        self.skint = QtWidgets.QLineEdit(self.frame)
        self.skint.setGeometry(QtCore.QRect(30, 270, 211, 22))
        self.skint.setObjectName("skint")
        self.skint.setPlaceholderText("")
        
        self.age = QtWidgets.QLineEdit(self.frame)
        self.age.setGeometry(QtCore.QRect(500, 230, 211, 22))
        self.age.setObjectName("age")
        self.age.setPlaceholderText("")
        
        self.insulin = QtWidgets.QLineEdit(self.frame)
        self.insulin.setGeometry(QtCore.QRect(500, 270, 211, 22))
        self.insulin.setObjectName("insulin")
        self.insulin.setPlaceholderText("")
        
        
        self.bmi = QtWidgets.QLineEdit(self.frame)
        self.bmi.setGeometry(QtCore.QRect(264, 310, 211, 22))
        self.bmi.setObjectName("bmi")
        self.bmi.setPlaceholderText("")
        
        self.label_2 = QtWidgets.QLabel(self.frame)
        self.label_2.setGeometry(QtCore.QRect(160, 40, 401, 20))
        self.label_2.setObjectName("label_2")
        
        self.label_12 = QtWidgets.QLabel(self.frame)
        self.label_12.setGeometry(QtCore.QRect(30, 214, 191, 16))
        self.label_12.setObjectName("label_12")
        
        self.label_4 = QtWidgets.QLabel(self.frame)
        self.label_4.setGeometry(QtCore.QRect(263, 214, 180, 16))
        self.label_4.setObjectName("label_4")
        self.label_5 = QtWidgets.QLabel(self.frame)
        self.label_5.setGeometry(QtCore.QRect(500, 214, 180, 16))
        self.label_5.setObjectName("label_5")
        self.label_6 = QtWidgets.QLabel(self.frame)
        self.label_6.setGeometry(QtCore.QRect(30, 254, 201, 16))
        self.label_6.setObjectName("label_6")
        self.label_7 = QtWidgets.QLabel(self.frame)
        self.label_7.setGeometry(QtCore.QRect(263, 255, 200, 16))
        self.label_7.setObjectName("label_7")
        self.label_8 = QtWidgets.QLabel(self.frame)
        self.label_8.setGeometry(QtCore.QRect(500, 255, 200, 16))
        self.label_8.setObjectName("label_8")
        self.label_9 = QtWidgets.QLabel(self.frame)
        self.label_9.setGeometry(QtCore.QRect(264, 295, 200, 16))
        self.label_9.setObjectName("label_9")
        
        self.label_10 = QtWidgets.QLabel(self.frame)
        self.label_10.setGeometry(QtCore.QRect(30, 290, 101, 30))
        self.label_10.setObjectName("label_10")
        self.label_11 = QtWidgets.QLabel(self.frame)
        self.label_11.setGeometry(QtCore.QRect(500, 290, 100, 30))
        self.label_11.setObjectName("label_11")
        
        self.anim = QPropertyAnimation(self.label_2, b"geometry")
        self.anim.setDuration(50000)
        self.anim.setStartValue(QRect(761, 40,2000, 20))
        self.anim.setEndValue(QRect(-600, 40, 2000, 20))
        self.anim.setLoopCount(50)
        self.anim.start()

        self.retranslateUi(Main)
        QtCore.QMetaObject.connectSlotsByName(Main)

    def retranslateUi(self, Main):
        _translate = QtCore.QCoreApplication.translate
        Main.setWindowTitle(_translate("Main", "Main"))
        self.label_3.setText(_translate("Main", "WE PREDICT FOR DIABETES AND PROVIDE MEDICATIONS"))
        self.pushButton.setText(_translate("Main", "PREDICT"))
        self.solution.setText(_translate("Main", "What to do"))
        self.label_2.setText(_translate("Main", "Instruction...: Kindly fill all fields as applied to you, and then click 'Predict' for Prediction........"))
        self.label_12.setText(_translate("Main", "Blood pressure value"))
        self.label_4.setText(_translate("Main", "Number of pregnancies"))
        self.label_5.setText(_translate("Main", "Age"))
        self.label_6.setText(_translate("Main", "Skin thickness"))
        self.label_7.setText(_translate("Main", "Glucose level"))
        self.label_8.setText(_translate("Main", "Insulin"))
        self.label_9.setText(_translate("Main", "Body mass index"))
        self.label_10.setText(_translate("Main", "<html><head/><body><p>Blurred vision</p></body></html>"))
        self.label_11.setText(_translate("Main", "<html><head/><body><p>Slow healing sore</p></body></html>"))


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    Main = QtWidgets.QDialog()
    ui = Ui_Main()
    ui.setupUi(Main)
    Main.show()
    sys.exit(app.exec_())
